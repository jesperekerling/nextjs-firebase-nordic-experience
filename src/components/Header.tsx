import Link from 'next/link';
import React from 'react';
import { usePathname } from 'next/navigation';
import { useAuth } from '../context/AuthContext';

function Header() {
  const { user } = useAuth();
  const pathname = usePathname();

  const isActive = (path: string) => pathname === path;

  return (
    <header className='px-8 py-4 bg-secondary flex items-center dark:bg-primary'>
      <Link href="/" className='flex items-center hover:opacity-70'>
        <svg width="31" height="29" viewBox="0 0 31 29" xmlns="http://www.w3.org/2000/svg">
          <path d="M23.7307 15.6424C23.7307 15.6424 23.7976 14.2515 23.7995 13.9349C23.8015 13.621 23.7104 13.5257 23.5456 13.6538C23.3776 13.7842 22.1337 14.7192 21.8341 15.1987C21.5362 15.6798 21.4331 16.8106 20.9661 17.4957C20.4998 18.1768 19.9258 18.543 19.9258 18.543C19.9258 18.543 19.9575 19.1184 20.0733 20.5303C20.1918 21.9422 20.6692 26.3827 20.6692 26.3827C20.6692 26.3827 20.7628 26.3282 21.1844 26.6103C21.6057 26.8911 22.413 27.3263 22.7804 27.6432C23.1466 27.9634 23.3463 28.2084 23.0509 28.2052C22.7547 28.2032 20.2668 28.2065 20.1376 28.2052C20.0077 28.2032 20.0185 28.0193 19.7907 27.7864C19.563 27.5529 19.3326 27.4304 19.3326 27.4304C19.3326 27.4304 19.2862 26.4652 19.1795 25.8865C19.0754 25.3124 18.1624 21.8128 17.9128 20.9756C17.6609 20.1378 17.3744 18.7696 17.3744 18.7696L17.2644 18.7676C17.2644 18.7676 16.4907 21.1681 16.0544 22.5747C15.6185 23.982 15.0879 25.6106 15.0843 25.9808C15.081 26.3529 15.2096 26.4465 15.7956 26.898C16.383 27.3483 17.4262 28.2078 17.0572 28.2052C16.6891 28.2012 14.3289 28.2065 14.2189 28.2052C14.1057 28.2038 14.1474 27.7191 13.856 27.4573C13.5623 27.1943 13.3052 27.0435 13.3052 27.0435C13.3052 27.0435 13.5767 25.4868 13.8097 24.1698C14.042 22.8535 14.8545 18.4428 14.8545 18.4428C14.8545 18.4428 13.3786 18.4481 12.0505 18.4363C10.7214 18.4254 7.79405 18.0481 7.79405 18.0481C7.79405 18.0481 7.65994 18.4547 7.39758 19.0103C7.13424 19.5634 6.68034 20.9329 6.67642 21.4916C6.67153 22.0482 6.77725 22.5514 7.17275 23.8539C7.56759 25.1567 7.94579 26.163 8.07338 26.3305C8.19999 26.498 9.06375 26.9874 9.50232 27.3614C9.94284 27.7375 10.3077 28.2061 10.0492 28.2048C9.79176 28.2022 7.68963 28.2061 7.54214 28.2048C7.39399 28.2029 7.4896 27.7546 7.161 27.5096C6.82946 27.2659 6.665 27.1723 6.63074 26.8925C6.59582 26.6133 6.14518 25.4221 5.78297 24.5833C5.42108 23.7449 4.69568 22.4581 4.69568 22.4581C4.69568 22.4581 4.71004 20.7139 4.69829 19.8583C4.6872 19.0044 4.94662 17.8415 4.94662 17.8415L4.836 17.8215C4.836 17.8215 4.00618 18.8511 3.48342 19.5516C2.96066 20.2521 2.08451 21.3392 2.08451 21.3392C2.08451 21.3392 1.8724 22.5458 1.82606 23.6779C1.77842 24.8093 1.7112 26.2185 1.7112 26.2185C1.7112 26.2185 1.96834 26.4077 2.58997 26.9138C3.21225 27.4186 3.98301 28.2071 3.46645 28.2045C2.94859 28.1979 1.38097 28.2058 1.16038 28.2045C0.937832 28.2029 0.978947 27.6422 0.704842 27.4169C0.429105 27.193 0.154674 27.0225 0.154674 27.0225C0.154674 27.0225 0.189263 25.1104 0.143905 23.9032C0.0978947 22.6972 0 21.1188 0 21.1188C0 21.1188 0.560937 20.3434 0.992 19.4383C1.42437 18.5312 1.63223 18.033 1.59927 17.605C1.56566 17.1771 1.25371 14.8552 1.25371 14.8552C1.25371 14.8552 0.629789 14.7895 0.558979 14.0515C0.47479 13.1589 0.251916 11.1509 1.60841 9.88352C2.96588 8.61451 4.44214 8.55243 6.80303 8.57214C9.1636 8.5925 12.5553 8.90122 14.3984 8.91632C16.242 8.93275 17.5352 8.73898 17.5352 8.73898C17.5352 8.73898 18.1151 7.90873 18.6858 7.91398C19.2572 7.91858 19.9226 7.90676 19.9226 7.90676C19.9226 7.90676 21.018 6.96879 21.3874 6.9724C21.7568 6.97568 22.7338 6.9655 22.7338 6.9655C22.7338 6.9655 23.2369 6.33822 23.8831 6.34347C24.5275 6.34873 24.6009 6.44364 24.7119 6.44299C24.8215 6.44528 24.86 6.35136 24.861 6.20389C24.863 6.05479 24.9008 5.96349 24.9008 5.96349C24.9008 5.96349 22.8907 5.70404 21.3316 4.7999C19.7725 3.89477 18.199 2.15479 18.0906 1.9492C17.982 1.74427 18.1314 1.54229 18.2789 1.54393C18.4267 1.54426 19.0115 2.14461 20.0563 2.85761C21.1035 3.57324 21.7277 3.74435 21.9493 3.74632C22.1699 3.74862 22.1699 3.74862 22.1699 3.74862C22.1699 3.74862 21.6772 3.18735 21.388 2.55415C21.0966 1.91964 20.6277 0.672299 21.0895 0.676569C21.5515 0.68051 21.4761 0.847676 21.6971 0.849318C21.9186 0.851289 22.3856 0.149124 22.6248 0.151095C22.8643 0.153394 23.2095 0.805638 23.3371 1.12256C23.4631 1.43982 23.7715 2.05495 24.0123 2.05725C24.2502 2.05824 24.2254 0.647668 24.2283 0.367853C24.2303 0.0913223 24.2874 -0.00162078 24.4535 2.13237e-05C24.6199 0.00232027 24.8721 0.671642 24.8662 1.22832C24.8617 1.78598 25.079 2.3259 25.3192 2.32721C25.5593 2.33115 25.762 2.09108 25.9516 1.64574C26.1389 1.20237 26.3872 0.313992 26.736 0.484442C27.0855 0.653908 26.7664 1.28251 26.689 1.63457C26.6117 1.98664 26.4397 2.80112 26.4368 3.0793C26.4365 3.35911 26.4632 4.23074 26.9997 4.23567C27.5329 4.23928 27.9799 3.83434 28.2811 3.20804C28.5813 2.57944 28.7889 1.94887 28.9406 1.5055C29.0911 1.06115 29.1834 1.09958 29.3129 1.09958C29.4422 1.10089 29.5681 1.34326 29.512 1.56528C29.4533 1.78762 29.3404 2.19486 29.2265 2.50981C29.1129 2.82477 28.7197 3.54566 28.8307 3.65699C28.9406 3.76931 29.4803 3.144 29.7982 2.66319C30.1147 2.18468 30.4534 1.42635 30.6923 1.42767C30.9325 1.42964 30.9674 1.74525 30.7618 2.09568C30.5543 2.44676 29.9558 3.62907 28.7474 4.80843C28.0064 5.52866 27.5577 5.79895 26.9472 5.99896C26.413 6.17269 25.8582 6.17631 25.8582 6.17631L25.8543 6.65777C25.8543 6.65777 27.1002 7.5583 28.1983 8.57181C29.295 9.58269 30.4681 10.4845 30.459 11.6537C30.4489 12.8236 29.8563 13.0774 29.4503 13.0735C29.045 13.0712 27.5597 12.0176 26.8405 12.012C26.1219 12.0071 25.5075 12.6143 25.1851 13.6883C24.862 14.7616 24.6887 15.447 24.3379 15.5554C23.9891 15.6634 23.7307 15.6424 23.7307 15.6424Z" fill="url(#paint0_linear_833_1126)" />
            <defs>
            <linearGradient id="paint0_linear_833_1126" x1="15.4482" y1="0" x2="15.4482" y2="28.2055" gradientUnits="userSpaceOnUse">
              <stop stopColor="#DE8022"/>
              <stop offset="1" stopColor="#784513"/>
            </linearGradient>
            </defs>
          </svg>
        <span className='pl-3 font-bold'>Nordic<br />Experiences</span>
      </Link>
      <nav className="fixed bottom-0 left-0 right-0 z-50 md:z-0 bg-white md:relative md:bg-transparent grow dark:bg-primary">
        <ul className="flex flex-wrap place-content-evenly md:place-content-center md:text-center md:gap-5 py-3 md:py-0">
          <li className="w-1/4 md:w-auto">
          
            <Link href="/" className={`hover:opacity-70 flex flex-col items-center md:inline ${isActive('/') ? 'font-bold' : ''}`}>
              <svg width="34" height="33" viewBox="0 0 34 33" xmlns="http://www.w3.org/2000/svg" className="md:inline block md:h-4 md:ml-3 h-10 text-center fill-black dark:fill-white">
                <path d="M12.5998 0C9.50131 0 6.39948 1.18129 4.03969 3.54141C-0.679911 8.26168 -0.679885 15.9323 4.03969 20.6525C8.58448 25.1979 15.873 25.3655 20.6212 21.1568L32.2524 32.7895C32.5234 33.0684 33.0263 33.0705 33.2997 32.7939C33.5732 32.5174 33.5655 32.0145 33.2837 31.7465L21.6526 20.1138C25.8607 15.3658 25.7046 8.08684 21.1598 3.54141C18.8 1.18129 15.6982 0 12.5998 0ZM12.5998 1.45554C15.3197 1.45554 18.0375 2.49306 20.117 4.57288C24.2761 8.73251 24.2761 15.4614 20.117 19.621C15.958 23.7807 9.24154 23.7807 5.08249 19.621C0.923437 15.4614 0.923408 8.73254 5.08249 4.57288C7.162 2.49307 9.87976 1.45554 12.5998 1.45554ZM12.5998 4.03423C10.5336 4.03423 8.46522 4.82276 6.89305 6.39516C6.61427 6.66625 6.61213 7.16922 6.88859 7.44268C7.16504 7.71614 7.66788 7.70844 7.93584 7.42666C9.22774 6.13457 10.9137 5.50123 12.5998 5.50123C14.2858 5.50123 15.9718 6.13457 17.2637 7.42666C17.5316 7.70845 18.0345 7.71615 18.3109 7.44268C18.5874 7.16922 18.5852 6.66625 18.3065 6.39516C16.7343 4.82276 14.6659 4.03423 12.5998 4.03423Z" />
              </svg>
              Packages
            </Link>
          </li>
          <li className="w-1/4 md:w-auto">
            <Link href="/housing" className={`hover:opacity-70 flex flex-col items-center md:inline ${isActive('/housing') ? 'font-bold' : ''}`}>
              <svg width="37" height="28" viewBox="0 0 37 28" xmlns="http://www.w3.org/2000/svg" className="md:inline md:h-4 h-10 fill-black dark:fill-white">
                <path fillRule="evenodd" clipRule="evenodd" d="M12.2424 1.18585C12.5673 0.911357 13.0507 0.911356 13.3756 1.18585L17.4518 4.62905V2.93578C17.4518 2.47211 17.8386 2.09623 18.3156 2.09623H22.2027C22.6798 2.09623 23.0665 2.47211 23.0665 2.93578V9.37174L24.8208 10.8536C25.0096 11.0131 25.118 11.2442 25.118 11.4873V26.6004C25.118 27.064 24.7313 27.4399 24.2542 27.4399H1.36379C0.886731 27.4399 0.5 27.064 0.5 26.6004V11.4873C0.5 11.2442 0.608397 11.0131 0.797164 10.8537L12.2424 1.18585ZM21.3389 7.91244V3.77532H19.1794V6.08836L21.3389 7.91244ZM12.809 2.93183L2.22758 11.87V25.7608H4.01631V17.9871C4.01631 17.5235 4.40304 17.1476 4.88008 17.1476H9.15563C9.6327 17.1476 10.0194 17.5235 10.0194 17.9871V25.7608H23.3904V11.8699L12.809 2.93183ZM8.29184 25.7608H5.74387V18.8267H8.29184V25.7608ZM35.9191 14.6362C35.9191 12.625 34.163 10.9703 32.0284 10.9703C29.8938 10.9703 28.1377 12.625 28.1377 14.6362C28.1377 16.6475 29.8938 18.3021 32.0284 18.3021C34.163 18.3021 35.9191 16.6475 35.9191 14.6362ZM29.9062 14.6362C29.9062 13.5185 30.8421 12.6366 32.0284 12.6366C33.2147 12.6366 34.1506 13.5185 34.1506 14.6362C34.1506 15.754 33.2147 16.6358 32.0284 16.6358C30.8421 16.6358 29.9062 15.754 29.9062 14.6362ZM29.2845 23.5344C29.2845 22.1392 30.4813 20.9746 32.0285 20.9746C33.5756 20.9746 34.7724 22.1392 34.7724 23.5344V25.7609H28.4207C27.9436 25.7609 27.5569 26.1368 27.5569 26.6004C27.5569 27.0641 27.9436 27.44 28.4207 27.44H35.6362C36.1133 27.44 36.5 27.0641 36.5 26.6004V23.5344C36.5 21.1631 34.4787 19.2955 32.0285 19.2955C29.5782 19.2955 27.5569 21.1631 27.5569 23.5344C27.5569 23.9981 27.9436 24.374 28.4207 24.374C28.8977 24.374 29.2845 23.9981 29.2845 23.5344ZM19.6153 17.1477C20.0924 17.1477 20.4791 17.5236 20.4791 17.9872V22.1428C20.4791 22.6064 20.0924 22.9823 19.6153 22.9823H12.6974C12.2203 22.9823 11.8336 22.6064 11.8336 22.1428V17.9872C11.8336 17.5236 12.2203 17.1477 12.6974 17.1477H19.6153ZM18.7515 21.3032V18.8268H13.5612V21.3032H18.7515Z" />
              </svg>
              Housing
            </Link>
          </li>
          <li className="w-1/4 md:w-auto">
            <Link href="/cart" className={`hover:opacity-70 flex flex-col items-center md:inline ${isActive('/cart') ? 'font-bold' : ''}`}>
              <svg width="28" height="23" viewBox="0 0 28 23" xmlns="http://www.w3.org/2000/svg" className="md:inline md:h-4 h-10 fill-black dark:fill-white">
                <path d="M26.8734 2.11826H6.05401L5.55381 0.44424C5.51547 0.31596 5.43625 0.203389 5.32796 0.123326C5.21967 0.0432639 5.08813 3.05296e-06 4.95296 0H1.1266C0.960415 0 0.801037 0.065335 0.683527 0.181632C0.566017 0.297929 0.5 0.455662 0.5 0.620131C0.5 0.7846 0.566017 0.942333 0.683527 1.05863C0.801037 1.17493 0.960415 1.24026 1.1266 1.24026H4.48483L8.19977 13.6711H7.09308C6.36147 13.6744 5.66095 13.9643 5.1448 14.4775C4.62864 14.9906 4.33886 15.6852 4.33886 16.4093C4.33886 17.1333 4.62864 17.8279 5.1448 18.3411C5.66095 18.8542 6.36147 19.1442 7.09308 19.1475H7.48004C7.2465 19.5338 7.12066 19.9745 7.11536 20.4247C7.11006 20.8749 7.22549 21.3184 7.44987 21.71C7.67426 22.1016 7.99957 22.4274 8.39264 22.654C8.78571 22.8806 9.23248 23 9.68738 23C10.1423 23 10.589 22.8806 10.9821 22.654C11.3752 22.4274 11.7005 22.1016 11.9249 21.71C12.1493 21.3184 12.2647 20.8749 12.2594 20.4247C12.2541 19.9745 12.1283 19.5338 11.8947 19.1475H21.7478C21.4623 19.6205 21.3398 20.1725 21.3984 20.7204C21.4571 21.2683 21.6938 21.7826 22.0731 22.186C22.4524 22.5893 22.9537 22.86 23.5017 22.9572C24.0497 23.0545 24.6148 22.9731 25.112 22.7253C25.6093 22.4775 26.0119 22.0767 26.2593 21.5831C26.5067 21.0895 26.5855 20.5298 26.484 19.9881C26.3825 19.4463 26.106 18.9518 25.6962 18.5789C25.2864 18.2059 24.7653 17.9747 24.2113 17.9199C24.1697 17.9114 24.1272 17.9072 24.0847 17.9072H7.09308C6.69327 17.9048 6.31067 17.7459 6.02883 17.4652C5.74698 17.1846 5.58879 16.805 5.58879 16.4093C5.58879 16.0136 5.74698 15.634 6.02883 15.3533C6.31067 15.0727 6.69327 14.9138 7.09308 14.9113H9.03406C9.03549 14.9113 9.0368 14.9113 9.03822 14.9113H9.04289H24.9278C25.0761 14.9113 25.2196 14.8593 25.3328 14.7644C25.4459 14.6695 25.5214 14.538 25.5458 14.3932L27.4915 2.8402C27.5064 2.75136 27.5017 2.66036 27.4775 2.57354C27.4533 2.48671 27.4103 2.40613 27.3515 2.33742C27.2927 2.2687 27.2194 2.21349 27.1369 2.17562C27.0543 2.13775 26.9644 2.11814 26.8734 2.11814V2.11826ZM11.0062 20.4531C11.0062 20.7113 10.9288 20.9637 10.7839 21.1783C10.639 21.393 10.433 21.5603 10.192 21.6591C9.95095 21.7579 9.68575 21.7838 9.42989 21.7334C9.17403 21.683 8.939 21.5587 8.75454 21.3762C8.57008 21.1936 8.44445 20.961 8.39356 20.7078C8.34267 20.4546 8.36879 20.1921 8.46862 19.9536C8.56845 19.715 8.73751 19.5112 8.95442 19.3677C9.17132 19.2243 9.42634 19.1477 9.68721 19.1477C10.0369 19.1481 10.3722 19.2858 10.6194 19.5305C10.8667 19.7752 11.0058 20.107 11.0062 20.4531ZM25.2739 20.4531C25.2739 20.7113 25.1966 20.9637 25.0516 21.1783C24.9067 21.393 24.7007 21.5603 24.4597 21.6591C24.2187 21.7579 23.9535 21.7838 23.6976 21.7334C23.4417 21.683 23.2067 21.5587 23.0223 21.3761C22.8378 21.1936 22.7122 20.961 22.6613 20.7077C22.6104 20.4545 22.6365 20.1921 22.7364 19.9535C22.8362 19.715 23.0053 19.5111 23.2222 19.3677C23.4391 19.2243 23.6941 19.1477 23.955 19.1477C24.3047 19.1481 24.6399 19.2858 24.8872 19.5305C25.1345 19.7752 25.2736 20.107 25.2739 20.4531ZM24.3967 13.6711H9.50641L6.42467 3.35829H26.1337L24.3967 13.6711Z" />
              </svg>
              Cart
            </Link>
          </li>
          <li className="w-1/4 md:w-auto">
            <Link href="/profile" className={`hover:opacity-70 flex flex-col items-center md:inline ${isActive('/profile') ? 'font-bold' : ''}`}>
              <svg width="37" height="36" viewBox="0 0 37 36" xmlns="http://www.w3.org/2000/svg" className="md:inline md:h-4 h-10 fill-black dark:fill-white">
                <path d="M21.5191 18.9967C23.0356 17.9827 24.0188 16.2645 24.0188 14.324C24.0188 11.2388 21.4755 8.72705 18.3519 8.72705C15.2282 8.72705 12.685 11.2389 12.685 14.324C12.685 16.2626 13.6663 17.9825 15.1847 18.9967C11.3462 19.966 8.62524 22.6552 8.62524 25.8282C8.62524 26.2242 8.93727 26.4893 9.29462 26.4893C9.65197 26.4893 9.96399 26.1811 9.96399 25.8282C9.96399 22.5674 13.7118 19.9232 18.3539 19.9232C22.994 19.9232 26.7439 22.5676 26.7439 25.8282C26.7439 26.2242 27.0559 26.4893 27.4132 26.4893C27.7706 26.4893 28.0826 26.1811 28.0826 25.8282C28.0791 22.6982 25.3563 20.0091 21.5196 18.9967H21.5191ZM18.35 18.599C15.9845 18.599 14.0217 16.7035 14.0217 14.3242C14.0217 11.9449 15.941 10.0494 18.35 10.0494C20.759 10.0494 22.6783 11.9449 22.6783 14.3242C22.6783 16.7035 20.7155 18.599 18.35 18.599Z" />
                <path d="M18.35 0C8.48697 0 0.5 7.88837 0.5 17.6296C0.5 27.3708 8.48697 35.2592 18.35 35.2592C28.213 35.2592 36.2 27.3708 36.2 17.6296C36.2 7.88837 28.213 0 18.35 0ZM18.35 33.892C9.24738 33.892 1.88427 26.5749 1.88427 17.6296C1.88427 8.68214 9.24738 1.36718 18.35 1.36718C27.4526 1.36718 34.8157 8.63939 34.8157 17.6296C34.8157 26.6198 27.4526 33.892 18.35 33.892Z" />
              </svg>
              Profile
            </Link>
          </li>
        </ul>
      </nav>

      {user ? (
        <span className='hidden md:inline-block md:flex-1 md:text-right'>
          Welcome, {user.displayName || user.email}
          <Link href="/logout" className='ml-5'>Log out</Link>
        </span>
      ) : (
        <Link href="/login" className='flex-1 text-right'>Log in</Link>
      )}

    </header>
  );
}

export default Header;